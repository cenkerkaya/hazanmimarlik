<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hazan — Eser</title>
  <meta name="color-scheme" content="dark light">
  <style>
    :root{
      --bg:#0b0e14; --panel:#121826cc; --border:#1f2432;
      --text:#e8edf6; --muted:#9aa4b2; --accent:#8ab4ff;
      --r:18px; --shadow:0 10px 40px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Yu Gothic UI","Yu Gothic","YuGothic","Segoe UI","Inter","Noto Sans",system-ui,-apple-system,Arial,sans-serif;
      font-weight:300; letter-spacing:.2px; color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% -10%, #1c2340 0%, transparent 60%),
        radial-gradient(900px 600px at 100% 0%, #17324c 0%, transparent 55%),
        linear-gradient(180deg, #0b0e14 0%, #0d1119 100%);
      min-height:100vh; display:grid; place-items:center; padding:22px;
    }

    /* Geçiş perdesi */
    .page-transition{ position:fixed; inset:0; background:radial-gradient(1200px 700px at 50% 50%, rgba(19,24,36,.9), rgba(11,14,20,1)); transform:scaleY(1); transform-origin:top; transition:transform .45s cubic-bezier(.2,.7,0,.98); z-index:9999 }
    .page-transition.is-done{ transform:scaleY(0) }

    .shell{ width:min(1100px,100%); background:var(--panel); border:1px solid var(--border); border-radius:var(--r); box-shadow:var(--shadow); overflow:hidden }
    header{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:18px 22px; border-bottom:1px solid var(--border); backdrop-filter:saturate(120%) blur(8px) }
    .id{ color:var(--muted); font-size:13px }
    .media{ display:grid; place-items:center; background:#0b0d12; aspect-ratio:16/9 }
    .media img,.media video{ max-width:100%; max-height:75vh; border-radius:12px; box-shadow:0 8px 30px rgba(0,0,0,.45) }
    .content{ padding:22px; display:grid; gap:10px }
    h1{ margin:0; font-size: clamp(22px, 3vw, 32px); font-weight:400 }
    .meta{ color:var(--muted); font-size:13px }
    .desc{ color:#cbd5e1; line-height:1.7 }
    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:8px }
    .btn{ border:1px solid #2a3142; background:#131a26; color:var(--text); padding:10px 12px; border-radius:10px; font-size:14px; text-decoration:none }
    .btn:hover{ border-color:#3b4661; background:#182033 }
    .oops{ padding:40px; text-align:center }
    .oops a{ color:var(--accent); text-decoration:none }
  </style>
</head>
<body>
  <div class="page-transition" id="transition"></div>

  <div class="shell" id="app">
    <header>
      <div>Hazan Architecture</div>
      <div class="id" id="idLabel">ID: —</div>
    </header>

    <div class="media" id="mediaArea" aria-live="polite"></div>

    <section class="content">
      <h1 id="title">Eser</h1>
      <div class="meta" id="meta"></div>
      <div class="desc" id="desc"></div>
      <div class="actions">
        <a class="btn" href="./index.html" data-transition>← Ana Sayfa</a>
        <a class="btn" id="openOriginal" href="#" target="_blank" style="display:none">Orijinal Dosyayı Aç</a>
      </div>
    </section>
  </div>

  <script>
    /* ---- DATA (index ile aynı) ---- */
    const DATA = {
      "organik-struktur": {
        type:"image",
        title:"Organik Strüktür",
        artist:"Hazan Mimarlık",
        year:"2025",
        src:"media/organik-struktur.jpg",
        desc:"Mavi ışık altında gerilmiş yüzeylerden oluşan organik mekânsal kurgu."
      },
      "isik-senaryosu": {
        type:"video",
        title:"Işık Senaryosu",
        artist:"Hazan Mimarlık",
        year:"2025",
        src:"media/isik-senaryosu.mp4",  // dosya adın farklıysa birebir değiştir
        autoplay:true, muted:true, loop:true, controls:true,
        desc:"Gece modu atmosferinin kısa kaydı."
      }
    };

    /* ---- Yardımcı referanslar ---- */
    const qs = new URLSearchParams(location.search);
    const id = qs.get("id");
    const cover = document.getElementById('transition');
    const app = document.getElementById('app');
    const idLabel = document.getElementById('idLabel');
    const mediaArea = document.getElementById('mediaArea');
    const titleEl = document.getElementById('title');
    const metaEl = document.getElementById('meta');
    const descEl = document.getElementById('desc');
    const openOriginal = document.getElementById('openOriginal');

    /* ---- Sayfa açılış animasyonu ---- */
    window.addEventListener('load', ()=> cover.classList.add('is-done'));

    /* ---- Render ---- */
    function oops(){
      app.innerHTML = `<div class="oops">
        <h2>İçerik bulunamadı</h2>
        <p>URL’deki <code>id</code> geçersiz. QR kodu veya dosya adını kontrol edin.</p>
        <p><a href="./index.html">Ana sayfaya dön</a></p>
      </div>`;
    }

    (function main(){
      idLabel.textContent = id ? ("ID: " + id) : "ID yok";
      if (!id || !DATA[id]) return oops();

      const item = DATA[id];
      titleEl.textContent = item.title || "Eser";
      metaEl.textContent = [item.artist, item.year].filter(Boolean).join(" · ");
      descEl.textContent = item.desc || "";

      if (item.type === "video") {
        const v = document.createElement('video');
        v.controls = item.controls !== false;
        v.autoplay = !!item.autoplay;
        v.loop = !!item.loop;
        v.muted = !!item.muted;
        v.playsInline = true;
        v.preload = "metadata";
        v.src = item.src;

        v.onerror = () => {
          mediaArea.innerHTML = `
            <div style="color:#cbd5e1;text-align:center;padding:16px">
              Video yüklenemedi. Dosya yolu ve kodeği kontrol edin.<br>
              <a href="${item.src}" target="_blank" style="color:#8ab4ff">Dosyayı doğrudan aç</a>
            </div>`;
        };
        mediaArea.replaceChildren(v);
      } else {
        const img = new Image();
        img.src = item.src;
        img.alt = item.title || "Eser";
        img.loading = "lazy";
        img.onerror = () => {
          mediaArea.innerHTML = `<div style="color:#cbd5e1;text-align:center;padding:16px">
            Görsel bulunamadı. Dosya adı ve yolu doğru mu?
          </div>`;
        };
        mediaArea.replaceChildren(img);
      }

      if (item.src) {
        openOriginal.style.display = "inline-flex";
        openOriginal.href = item.src;
      }
    })();

    /* ---- Geri dönüşte geçiş animasyonu ---- */
    document.addEventListener('click', (e)=>{
      const a = e.target.closest('a[data-transition]');
      if (!a || a.target === '_blank' || e.metaKey || e.ctrlKey) return;
      e.preventDefault();
      cover.classList.remove('is-done'); // perdeyi kapat
      setTimeout(()=> location.href = a.href, 420);
    });
  </script>
</body>
</html>
